{"version":3,"sources":["../../lib/removeDestination.js"],"names":["require","getAccessKeyForTenant","removeLogDestination","module","exports","ctx","sls","service","custom","enterprise","collectLambdaLogs","accessKey","tenant","destinationOpts","appUid","tenantUid","serviceName","getServiceName","stageName","provider","getStage","regionName","getRegion"],"mappings":"AAAA;;;;;;iBAEwDA,OAAO,CAAC,0BAAD,C;MAAvDC,qB,YAAAA,qB;MAAuBC,oB,YAAAA,oB;;AAE/BC,MAAM,CAACC,OAAP;AAAA;AAAA;AAAA,+BAAiB,WAAMC,GAAN,EAAa;AAC5B,QACE,CAACA,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAjB,IACA,CAACH,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,UADxB,IAEA,CAACJ,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,UAAvB,CAAkCC,iBAHrC,EAIE;AACA;AACD;;AACD,UAAMC,SAAS,SAASV,qBAAqB,CAACI,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBK,MAAjB,CAA7C;AACA,UAAMC,eAAe,GAAG;AACtBF,MAAAA,SADsB;AAEtBG,MAAAA,MAAM,EAAET,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBO,MAFF;AAGtBC,MAAAA,SAAS,EAAEV,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBQ,SAHL;AAItBC,MAAAA,WAAW,EAAEX,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBU,cAAhB,EAJS;AAKtBC,MAAAA,SAAS,EAAEb,GAAG,CAACc,QAAJ,CAAaC,QAAb,EALW;AAMtBC,MAAAA,UAAU,EAAEhB,GAAG,CAACc,QAAJ,CAAaG,SAAb;AANU,KAAxB;AASA,UAAMpB,oBAAoB,CAACW,eAAD,CAA1B;AACA;AACD,GApBD;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["'use strict';\n\nconst { getAccessKeyForTenant, removeLogDestination } = require('@serverless/platform-sdk');\n\nmodule.exports = async ctx => {\n  if (\n    !ctx.sls.service.custom ||\n    !ctx.sls.service.custom.enterprise ||\n    !ctx.sls.service.custom.enterprise.collectLambdaLogs\n  ) {\n    return;\n  }\n  const accessKey = await getAccessKeyForTenant(ctx.sls.service.tenant);\n  const destinationOpts = {\n    accessKey,\n    appUid: ctx.sls.service.appUid,\n    tenantUid: ctx.sls.service.tenantUid,\n    serviceName: ctx.sls.service.getServiceName(),\n    stageName: ctx.provider.getStage(),\n    regionName: ctx.provider.getRegion(),\n  };\n\n  await removeLogDestination(destinationOpts);\n  return;\n};\n"],"file":"removeDestination.js"}