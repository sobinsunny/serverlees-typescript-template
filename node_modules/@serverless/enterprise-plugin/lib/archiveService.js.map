{"version":3,"sources":["../../lib/archiveService.js"],"names":["require","archiveService","getAccessKeyForTenant","module","exports","ctx","accessKey","sls","service","tenant","cli","log","data","name","app","provider","region","then","catch","err","Error"],"mappings":"AAAA;AAEA;;;;;;;;iBAIkDA,OAAO,CAAC,0BAAD,C;MAAjDC,c,YAAAA,c;MAAgBC,qB,YAAAA,qB;;AAExBC,MAAM,CAACC,OAAP;AAAA;AAAA;AAAA,+BAAiB,WAAeC,GAAf,EAAoB;AACnC;AACA,UAAMC,SAAS,SAASJ,qBAAqB,CAACG,GAAG,CAACE,GAAJ,CAAQC,OAAR,CAAgBC,MAAjB,CAA7C;AAEAJ,IAAAA,GAAG,CAACE,GAAJ,CAAQG,GAAR,CAAYC,GAAZ,CAAgB,uDAAhB;AAEA,UAAMC,IAAI,GAAG;AACXC,MAAAA,IAAI,EAAER,GAAG,CAACE,GAAJ,CAAQC,OAAR,CAAgBA,OADX;AAEXC,MAAAA,MAAM,EAAEJ,GAAG,CAACE,GAAJ,CAAQC,OAAR,CAAgBC,MAFb;AAGXK,MAAAA,GAAG,EAAET,GAAG,CAACE,GAAJ,CAAQC,OAAR,CAAgBM,GAHV;AAIXC,MAAAA,QAAQ,EAAEV,GAAG,CAACE,GAAJ,CAAQC,OAAR,CAAgBO,QAAhB,CAAyBF,IAJxB;AAKXG,MAAAA,MAAM,EAAEX,GAAG,CAACE,GAAJ,CAAQC,OAAR,CAAgBO,QAAhB,CAAyBC,MALtB;AAMXV,MAAAA;AANW,KAAb;AASA,WAAOL,cAAc,CAACW,IAAD,CAAd,CACJK,IADI,CACC,MAAM;AACVZ,MAAAA,GAAG,CAACE,GAAJ,CAAQG,GAAR,CAAYC,GAAZ,CAAgB,mEAAhB;AACD,KAHI,EAIJO,KAJI,CAIEC,GAAG,IAAI;AACZd,MAAAA,GAAG,CAACE,GAAJ,CAAQG,GAAR,CAAYC,GAAZ,CAAgB,+DAAhB;AACA,YAAM,IAAIS,KAAJ,CAAUD,GAAV,CAAN;AACD,KAPI,CAAP;AAQD,GAvBD;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["'use strict';\n\n/*\n * Archive Service\n */\n\nconst { archiveService, getAccessKeyForTenant } = require('@serverless/platform-sdk');\n\nmodule.exports = async function(ctx) {\n  // Defaults\n  const accessKey = await getAccessKeyForTenant(ctx.sls.service.tenant);\n\n  ctx.sls.cli.log('Archiving this service in the Serverless Dashboard...');\n\n  const data = {\n    name: ctx.sls.service.service,\n    tenant: ctx.sls.service.tenant,\n    app: ctx.sls.service.app,\n    provider: ctx.sls.service.provider.name,\n    region: ctx.sls.service.provider.region,\n    accessKey,\n  };\n\n  return archiveService(data)\n    .then(() => {\n      ctx.sls.cli.log('Successfully archived this service in the Serverless Dashboard...');\n    })\n    .catch(err => {\n      ctx.sls.cli.log('Failed to archive this service in the Serverless Dashboard...');\n      throw new Error(err);\n    });\n};\n"],"file":"archiveService.js"}