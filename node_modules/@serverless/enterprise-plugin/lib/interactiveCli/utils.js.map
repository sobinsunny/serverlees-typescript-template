{"version":3,"sources":["../../../lib/interactiveCli/utils.js"],"names":["require","createAccessKeyForTenant","writeConfigFile","module","exports","resolveAccessKey","user","tenantName","accessKeys","token","users","userId","dashboard","sleep","timeout","Promise","resolve","setTimeout"],"mappings":"AAAA;;;;;;iBAEsDA,OAAO,CAAC,0BAAD,C;MAArDC,wB,YAAAA,wB;MAA0BC,e,YAAAA,e;;AAElCC,MAAM,CAACC,OAAP,GAAiB;AACfC,EAAAA,gBAAgB;AAAA,8CAAE,WAAOC,IAAP,EAAaC,UAAb,EAA4B;AAC5C,UAAID,IAAI,CAACE,UAAL,IAAmBF,IAAI,CAACE,UAAL,CAAgBD,UAAhB,CAAvB,EAAoD,OAAOD,IAAI,CAACE,UAAL,CAAgBD,UAAhB,CAAP;AACpD,YAAME,KAAK,SAASR,wBAAwB,CAACM,UAAD,CAA5C;AACA,YAAML,eAAe,CAAC;AACpBQ,QAAAA,KAAK,EAAE;AAAE,WAACJ,IAAI,CAACK,MAAN,GAAe;AAAEC,YAAAA,SAAS,EAAE;AAAEJ,cAAAA,UAAU,EAAE;AAAE,iBAACD,UAAD,GAAcE;AAAhB;AAAd;AAAb;AAAjB;AADa,OAAD,CAArB;AAGA,aAAOA,KAAP;AACD,KAPe;;AAAA;AAAA;AAAA;;AAAA;AAAA,KADD;AASfI,EAAAA,KAAK,EAAEC,OAAO,IAAI,IAAIC,OAAJ,CAAYC,OAAO,IAAIC,UAAU,CAACD,OAAD,EAAUF,OAAV,CAAjC;AATH,CAAjB","sourcesContent":["'use strict';\n\nconst { createAccessKeyForTenant, writeConfigFile } = require('@serverless/platform-sdk');\n\nmodule.exports = {\n  resolveAccessKey: async (user, tenantName) => {\n    if (user.accessKeys && user.accessKeys[tenantName]) return user.accessKeys[tenantName];\n    const token = await createAccessKeyForTenant(tenantName);\n    await writeConfigFile({\n      users: { [user.userId]: { dashboard: { accessKeys: { [tenantName]: token } } } },\n    });\n    return token;\n  },\n  sleep: timeout => new Promise(resolve => setTimeout(resolve, timeout)),\n};\n"],"file":"utils.js"}