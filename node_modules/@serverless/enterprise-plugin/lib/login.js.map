{"version":3,"sources":["../../lib/login.js"],"names":["require","login","module","exports","ctx","sls","cli","log","service","tenant","err","process","exit","app"],"mappings":"AAAA;;;;;;iBAEkBA,OAAO,CAAC,0BAAD,C;MAAjBC,K,YAAAA,K;;AAERC,MAAM,CAACC,OAAP;AAAA;AAAA;AAAA,+BAAiB,WAAeC,GAAf,EAAoB;AACnCA,IAAAA,GAAG,CAACC,GAAJ,CAAQC,GAAR,CAAYC,GAAZ,CAAgB,4CAAhB,EADmC,CAEnC;AACA;;AACA,QAAI;AACF,YAAMN,KAAK,CAACG,GAAG,CAACC,GAAJ,CAAQG,OAAR,CAAgBC,MAAjB,CAAX;AACD,KAFD,CAEE,OAAOC,GAAP,EAAY;AACZ,UAAIA,GAAG,KAAK,qCAAZ,EAAmD;AACjDN,QAAAA,GAAG,CAACC,GAAJ,CAAQC,GAAR,CAAYC,GAAZ,CACE,sGADF;AAGAI,QAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACD;AACF;;AACDR,IAAAA,GAAG,CAACC,GAAJ,CAAQC,GAAR,CAAYC,GAAZ,CAAgB,0CAAhB;;AACA,QAAI,CAACH,GAAG,CAACC,GAAJ,CAAQG,OAAR,CAAgBC,MAAjB,IAA2B,CAACL,GAAG,CAACC,GAAJ,CAAQG,OAAR,CAAgBK,GAAhD,EAAqD;AACnDT,MAAAA,GAAG,CAACC,GAAJ,CAAQC,GAAR,CAAYC,GAAZ,CAAgB,mDAAhB;AACD;;AACDI,IAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACD,GAnBD;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["'use strict';\n\nconst { login } = require('@serverless/platform-sdk');\n\nmodule.exports = async function(ctx) {\n  ctx.sls.cli.log('Logging you in via your default browser...');\n  // Include a \"tenant\" in \"login()\"...\n  // This will create a new accessKey for that tenant on every login.\n  try {\n    await login(ctx.sls.service.tenant);\n  } catch (err) {\n    if (err === 'Complete sign-up before logging in.') {\n      ctx.sls.cli.log(\n        \"Please complete sign-up at dashboard.serverless.com, then run 'serverless' to configure your service\"\n      );\n      process.exit(1);\n    }\n  }\n  ctx.sls.cli.log('You sucessfully logged in to Serverless.');\n  if (!ctx.sls.service.tenant || !ctx.sls.service.app) {\n    ctx.sls.cli.log(\"Please run 'serverless' to configure your service\");\n  }\n  process.exit(0);\n};\n"],"file":"login.js"}